<nav
  [class.sidebar-collapsed]="sidebarCollapse.isCollapsed$ | async"
  class="sidebar"
>
  <div
    class="sidebar-logo d-flex align-items-center justify-content-center sidnav-logo"
  >
    <span class="fw-bold text-white">Sonali ERP</span>
  </div>

  <ul class="list-unstyled p-3">
    @for (item of menuItems; track $index) {
      <li>
        <!-- If item has children -->
        @if (item.children?.length) {
          <a
            href="javascript:void(0)"
            (click)="toggleMenu($index)"
            [class.active]="openMenuIndex === $index"
            class="d-flex justify-content-between align-items-center"
          >
            {{ item.label }}
            <i
              class="bi"
              [ngClass]="openMenuIndex === $index ? 'bi-chevron-up' : 'bi-chevron-down'"
            ></i>
          </a>

          <ul
            class="list-unstyled ps-3 overflow-hidden"
            [style.display]="openMenuIndex === $index ? 'block' : 'none'"
          >
            @for (child of item.children; track $index) {
              <li>
                <a
                  href="javascript:void(0)"
                  (click)="routeToPage(child)"
                  [class.active-submenu]="
                    activeChildRoute &&
                    activeChildRoute.route === child.route &&
                    isQueryParamMatch(activeChildRoute.queryParam, child.queryParam)
                  "
                >
                  {{ child.label }}
                </a>
              </li>
            }
          </ul>
        }
        <!-- If item has no children -->
        @else {
          <a
            href="javascript:void(0)"
            (click)="routeToPage(item)"
            [class.active-submenu]="
              activeChildRoute &&
              activeChildRoute.route === item.route &&
              isQueryParamMatch(activeChildRoute.queryParam, item.queryParam)
            "
          >
            {{ item.label }}
          </a>
        }
      </li>
    }
  </ul>
</nav>
